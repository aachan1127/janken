<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>じゃんけん</title>
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP" rel="stylesheet" />
  <link rel="stylesheet" href="css/janken.css">
</head>

<body>
  <main>

    <section>
      <h1>じゃんけん</h1>
    </section>

    <div>
      <p>コンピューターに勝ってください</p>
      <button id="start"><img src="" alt="start"></button><!--スタート-->

    </div>


    <section>
      <p id="computer">ちょき</p>
    </section>

    <section>
      <p id="result">勝敗は？？</p>
    </section>

    <section>
      <button id="guu"><img src="images/guu.png" alt="guu"></button> <!--ぐー-->
      <button id="cyoki"><img src="images/cyoki.png" alt="choki"></button>　<!--ちょき-->
      <button id="paa"><img src="images/paa.png" alt="paa"></button>　<!--パー-->
    </section>


    <!-- 勝った時の画像 -->

    <section id="yarujan">

      <li><img id="result_yarujan" src="" alt="yarujan_img"></li>
      <div class="tuuchan01_wrap">
        <li><img id="result_tuuchan" src="" alt="tuuchan_01_img"></li>
      </div>

    </section>


    <section>
      <p id="Score">勝った回数:0</p><!-- cauntの値を表示する要素 -->
      <!-- <p id="charenge_count">合計の試合数：0</p> charengeの値を表示する要素 -->
    </section>



  </main>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    // 勝った回数のカウントを入れる変数
    let caunt = 0;
    // 試合数の合計数を入れる変数
    let charenge = 0;
    // 取得した文字を入れる変数
    let computer_1 = $("computer_1").text();
    // cauntの値を表示する要素を取得する
    const Score = $("#Score").text;

    // cauntの初期値を表示する
    Score.textContent = `勝った回数：${caunt}`;

    // cauntの値が更新されるたびに、その値を表示する
    function updateScore(newcaunt) {
      Score.textContent = `勝った回数：${newcaunt}`;
    }
    setInterval(() => {
      caunt;
      updateScore(caunt); //勝ったカウントを更新させるアクション
    }, 1000); // 1秒ごとに更新してみる

    // ボタンを押した時に動く関数
    function btn() {

      // 試合数の計測
      charenge = (charenge + 1);
      // cauntが０以下にならないようにする処理
      caunt = Math.max(0, caunt);


      if (caunt === 2) {
        alert("５回勝ちました!");
      }

      if (caunt === 2) {
        result_yarujan.src = 'images/yarujan.png'; // 勝った時の画像のパス
      }

      if (caunt === 10) {
        result_tuuchan.src = 'images/tuuchan01.png';//10回買った時の画像を表示
      }
      const min = 1;
      const max = 3;

      const randomnumber = Math.floor(Math.random() * (max - min + 1)) + min;

      if (randomnumber === 1) {
        $("#computer").text('ぐー');
      }
      if (randomnumber === 2) {
        $("#computer").text('ちょき');
      }
      if (randomnumber === 3) {
        $("#computer").text('パー');
      }
    } //ここまでbtn


    // ぐー押したとき
    $(`#guu`).on(`click`, function () {
      let computer_1 = $("#computer").text();

      if (computer_1 === "ぐー") {
        // $("#computer").text('ぐー');
        $("#result").text('あいこ');
      }
      else if (computer_1 === "ちょき") {
        // $("#computer").text('ちょき');
        $("#result").text('勝ち');
        // 勝ったときに１＋されるアクション
        caunt = (caunt + 1);
        console.log("ちょき");
      }
      else if (computer_1 === "パー") {
        // $("#computer").text('パー');
        $("#result").text('負け');
        //負けた時に−１されるアクション
        caunt = (caunt - 1);
        console.log("パー");
      } btn();
    });
    // ちょき押したとき
    $(`#cyoki`).on(`click`, function () {
      let computer_1 = $("computer_1").text();

      if (computer_1 === "ぐー") {
        // $("#computer").text('ぐー');
        $("#result").text('負け');
        //負けた時に−１されるアクション
        caunt = (caunt - 1);
      }
      else if (computer_1 === "ちょき") {
        // $("#computer").text('ちょき');
        $("#result").text('あいこ');
      }
      else if (computer_1 === "パー") {
        // $("#computer").text('パー');
        $("#result").text('勝ち');
        // 勝ったときに１＋されるアクション
        caunt = (caunt + 1);
      } btn();
    })
    // パー押したとき
    $(`#paa`).on(`click`, function () {
      let computer_1 = $("computer_1").text();

      if (computer_1 === "ぐー") {
        // $("#computer").text('ぐー');
        $("#result").text('勝ち');
        // 勝ったときに１＋されるアクション
        caunt = (caunt + 1);
      }
      else if (computer_1 === "ちょき") {
        // $("#computer").text('ちょき');
        $("#result").text('負け');
        //負けた時に−１されるアクション
        caunt = (caunt - 1);

      }
      else if (computer_1 === "パー") {
        // $("#computer").text('パー');
        $("#result").text('あいこ');
      } btn();

    })
  </script>


</body>

</html>